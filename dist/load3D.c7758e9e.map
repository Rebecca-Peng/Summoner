{"version":3,"sources":["load3D.js"],"names":["scene","camera","fieldOfView","aspectRatio","nearPlane","farPlane","gobalLight","shadowLight","backLight","renderer","container","controls","HEIGHT","WIDTH","windowHalfX","windowHalfY","mousePos","x","y","oldMousePos","ballWallDepth","hero","initScreenAnd3D","window","innerHeight","innerWidth","THREE","Scene","PerspectiveCamera","position","z","lookAt","Vector3","WebGLRenderer","alpha","antialias","setPixelRatio","devicePixelRatio","setSize","shadowMapEnabled","document","getElementById","appendChild","domElement","addEventListener","handleWindowResize","handleMouseMove","handleTouchMove","aspect","updateProjectionMatrix","event","clientX","clientY","touches","length","preventDefault","pageX","pageY","createLights","globalLight","HemisphereLight","DirectionalLight","set","castShadow","shadowDarkness","shadowMapWidth","shadowMapHeight","add","createFloor","floor","Mesh","PlaneBufferGeometry","MeshBasicMaterial","color","rotation","Math","PI","receiveShadow","createHero","Cat","threeGroup","createBall","ball","Ball","woolNodes","woolSegLength","gravity","accuracy","redMat","MeshLambertMaterial","shading","FlatShading","stringMat","LineBasicMaterial","linewidth","Group","ballRay","verts","stringGeom","Geometry","i","v","vertices","push","woolV","WoolVert","oldx","oldy","fx","fy","isRootNode","vertex","attach","string","Line","bodyGeom","SphereGeometry","body","wireGeom","TorusGeometry","wire1","wire2","clone","wire3","wire4","wire5","wire6","wire7","wire8","wire9","scale","traverse","object","constraints","prototype","update","wind","add_force","nx","ny","point","Constraint","p1","p2","posX","posY","posZ","nodesCount","constraintsCount","c","diff_x","diff_y","dist","sqrt","diff","px","py","min","max","geometry","verticesNeedUpdate","receivePower","tp","t","loop","render","updateTail","ballPos","getBallPos","transferPower","interactWithBall","requestAnimationFrame","vector","unproject","dir","sub","normalize","distance","pos","multiplyScalar","init"],"mappings":"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","file":"load3D.c7758e9e.map","sourceRoot":"..","sourcesContent":["\n//THREEJS RELATED VARIABLES \n\nvar scene,\n    camera, fieldOfView, aspectRatio, nearPlane, farPlane,\n    gobalLight, shadowLight, backLight,\n    renderer,\n    container,\n    controls;\n\n//SCREEN & MOUSE VARIABLES\n\nvar HEIGHT, WIDTH, windowHalfX, windowHalfY,\n    mousePos = { x: 0, y: 0 },\n    oldMousePos = {x:0, y:0},\n    ballWallDepth = 28;\n\n\n//3D OBJECTS VARIABLES\n\nvar hero;\n\n//INIT THREE JS, SCREEN AND MOUSE EVENTS\n\nfunction initScreenAnd3D() {\n  \n  HEIGHT = window.innerHeight;\n  WIDTH = window.innerWidth;\n  windowHalfX = WIDTH / 2;\n  windowHalfY = HEIGHT / 2;\n\n  scene = new THREE.Scene();\n  aspectRatio = WIDTH / HEIGHT;\n  fieldOfView = 50;\n  nearPlane = 1;\n  farPlane = 2000;\n  camera = new THREE.PerspectiveCamera(\n    fieldOfView,\n    aspectRatio,\n    nearPlane,\n    farPlane\n    );\n  camera.position.x = 0;\n  camera.position.z = 300;\n  camera.position.y = 250;\n  camera.lookAt(new THREE.Vector3(0, 60, 0));\n\n  renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n  renderer.setPixelRatio( window.devicePixelRatio );\n  renderer.setSize(WIDTH, HEIGHT);\n  renderer.shadowMapEnabled = true;\n  \n  container = document.getElementById('world');\n  container.appendChild(renderer.domElement);\n  \n  window.addEventListener('resize', handleWindowResize, false);\n  document.addEventListener('mousemove', handleMouseMove, false);\n  document.addEventListener('touchmove', handleTouchMove, false);\n  \n  /*\n  controls = new THREE.OrbitControls(camera, renderer.domElement);\n  controls.minPolarAngle = -Math.PI / 2; \n  controls.maxPolarAngle = Math.PI / 2;\n  controls.noZoom = true;\n  controls.noPan = true;\n  //*/\n\n\n}\n\nfunction handleWindowResize() {\n  HEIGHT = window.innerHeight;\n  WIDTH = window.innerWidth;\n  windowHalfX = WIDTH / 2;\n  windowHalfY = HEIGHT / 2;\n  renderer.setSize(WIDTH, HEIGHT);\n  camera.aspect = WIDTH / HEIGHT;\n  camera.updateProjectionMatrix();\n}\n\nfunction handleMouseMove(event) {\n  mousePos = {x:event.clientX, y:event.clientY};\n} \n\nfunction handleTouchMove(event) {\n  if (event.touches.length == 1) {\n    event.preventDefault();\n    mousePos = {x:event.touches[0].pageX, y:event.touches[0].pageY};\n  }\n}\n\nfunction createLights() {\n  globalLight = new THREE.HemisphereLight(0xffffff, 0xffffff, .5)\n  \n  shadowLight = new THREE.DirectionalLight(0xffffff, .9);\n  shadowLight.position.set(200, 200, 200);\n  shadowLight.castShadow = true;\n  shadowLight.shadowDarkness = .2;\n  shadowLight.shadowMapWidth = shadowLight.shadowMapHeight = 2048;\n  \n  backLight = new THREE.DirectionalLight(0xffffff, .4);\n  backLight.position.set(-100, 100, 100);\n  backLight.castShadow = true;\n  backLight.shadowDarkness = .1;\n  backLight.shadowMapWidth = shadowLight.shadowMapHeight = 2048;\n  \n  scene.add(globalLight);\n  scene.add(shadowLight);\n  scene.add(backLight);\n}\n\nfunction createFloor(){ \n  floor = new THREE.Mesh(new THREE.PlaneBufferGeometry(1000,1000), new THREE.MeshBasicMaterial({color: 0x6ecccc}));\n  floor.rotation.x = -Math.PI/2;\n  floor.position.y = 0;\n  floor.receiveShadow = true;\n  scene.add(floor);\n}\n\nfunction createHero() {\n  hero = new Cat();\n  scene.add(hero.threeGroup);\n}\n\nfunction createBall() {\n  ball = new Ball();\n  scene.add(ball.threeGroup);\n}\n\n// BALL RELATED CODE\n\n\nvar woolNodes = 10,\n\twoolSegLength = 2,\n\tgravity = -.8,\n\taccuracy =1;\n\n\nBall = function(){\n\n\tvar redMat = new THREE.MeshLambertMaterial ({\n\t    color: 0x630d15, \n\t    shading:THREE.FlatShading\n\t});\n\n\tvar stringMat = new THREE.LineBasicMaterial({\n    \tcolor: 0x630d15,\n    \tlinewidth: 3\n\t});\n\n\tthis.threeGroup = new THREE.Group();\n\tthis.ballRay = 8;\n\n\tthis.verts = [];\n\n\t// string\n\tvar stringGeom = new THREE.Geometry();\n\n\tfor (var i=0; i< woolNodes; i++\t){\n\t\tvar v = new THREE.Vector3(0, -i*woolSegLength, 0);\n\t\tstringGeom.vertices.push(v);\n\n\t\tvar woolV = new WoolVert();\n\t\twoolV.x = woolV.oldx = v.x;\n\t\twoolV.y = woolV.oldy = v.y;\n\t\twoolV.z = 0;\n\t\twoolV.fx = woolV.fy = 0;\n\t\twoolV.isRootNode = (i==0);\n\t\twoolV.vertex = v;\n\t\tif (i > 0) woolV.attach(this.verts[(i - 1)]);\n\t\tthis.verts.push(woolV);\n\t\t\n\t}\n  \tthis.string = new THREE.Line(stringGeom, stringMat);\n\n  \t// body\n  \tvar bodyGeom = new THREE.SphereGeometry(this.ballRay, 5,4);\n\tthis.body = new THREE.Mesh(bodyGeom, redMat);\n  \tthis.body.position.y = -woolSegLength*woolNodes;\n\n  \tvar wireGeom = new THREE.TorusGeometry( this.ballRay, .5, 3, 10, Math.PI*2 );\n  \tthis.wire1 = new THREE.Mesh(wireGeom, redMat);\n  \tthis.wire1.position.x = 1;\n  \tthis.wire1.rotation.x = -Math.PI/4;\n\n  \tthis.wire2 = this.wire1.clone();\n  \tthis.wire2.position.y = 1;\n  \tthis.wire2.position.x = -1;\n  \tthis.wire1.rotation.x = -Math.PI/4 + .5;\n  \tthis.wire1.rotation.y = -Math.PI/6;\n\n  \tthis.wire3 = this.wire1.clone();\n  \tthis.wire3.rotation.x = -Math.PI/2 + .3;\n\n  \tthis.wire4 = this.wire1.clone();\n  \tthis.wire4.position.x = -1;\n  \tthis.wire4.rotation.x = -Math.PI/2 + .7;\n\n  \tthis.wire5 = this.wire1.clone();\n  \tthis.wire5.position.x = 2;\n  \tthis.wire5.rotation.x = -Math.PI/2 + 1;\n\n  \tthis.wire6 = this.wire1.clone();\n  \tthis.wire6.position.x = 2;\n  \tthis.wire6.position.z = 1;\n  \tthis.wire6.rotation.x = 1;\n\n  \tthis.wire7 = this.wire1.clone();\n  \tthis.wire7.position.x = 1.5;\n  \tthis.wire7.rotation.x = 1.1;\n\n  \tthis.wire8 = this.wire1.clone();\n  \tthis.wire8.position.x = 1;\n  \tthis.wire8.rotation.x = 1.3;\n\n  \tthis.wire9 = this.wire1.clone();\n  \tthis.wire9.scale.set(1.2,1.1,1.1);\n  \tthis.wire9.rotation.z = Math.PI/2;\n  \tthis.wire9.rotation.y = Math.PI/2;\n  \tthis.wire9.position.y = 1;\n  \t\n  \tthis.body.add(this.wire1);\n  \tthis.body.add(this.wire2);\n  \tthis.body.add(this.wire3);\n  \tthis.body.add(this.wire4);\n  \tthis.body.add(this.wire5);\n  \tthis.body.add(this.wire6);\n  \tthis.body.add(this.wire7);\n  \tthis.body.add(this.wire8);\n  \tthis.body.add(this.wire9);\n\n  \tthis.threeGroup.add(this.string);\n\tthis.threeGroup.add(this.body);\n\n\tthis.threeGroup.traverse( function ( object ) {\n    if ( object instanceof THREE.Mesh ) {\n      object.castShadow = true;\n      object.receiveShadow = true;\n    }});\n\n}\n\n/* \nThe next part of the code is largely inspired by this codepen :\nhttps://codepen.io/dissimulate/pen/KrAwx?editors=001\nthanks to dissimulate for his great work\n*/\n\n/*\nCopyright (c) 2013 dissimulate at Codepen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n\n\nWoolVert = function(){\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.z = 0;\n\tthis.oldx = 0;\n\tthis.oldy = 0;\n\tthis.fx = 0;\n\tthis.fy = 0;\n\tthis.isRootNode = false;\n\tthis.constraints = [];\n\tthis.vertex = null;\n}\n\n\nWoolVert.prototype.update = function(){\n\tvar wind = 0;//.1+Math.random()*.5;\n  \tthis.add_force(wind, gravity);\n\n  \tnx = this.x + ((this.x - this.oldx)*.9) + this.fx;\n  \tny = this.y + ((this.y - this.oldy)*.9) + this.fy;\n  \tthis.oldx = this.x;\n  \tthis.oldy = this.y;\n  \tthis.x = nx;\n  \tthis.y = ny;\n\n  \tthis.vertex.x = this.x;\n  \tthis.vertex.y = this.y;\n  \tthis.vertex.z = this.z;\n\n  \tthis.fy = this.fx = 0\n}\n\nWoolVert.prototype.attach = function(point) {\n  this.constraints.push(new Constraint(this, point));\n};\n\nWoolVert.prototype.add_force = function(x, y) {\n  this.fx += x;\n  this.fy += y;\n};\n\nConstraint = function(p1, p2) {\n  this.p1 = p1;\n  this.p2 = p2;\n  this.length = woolSegLength;\n};\n\nBall.prototype.update = function(posX, posY, posZ){\n\t\t\n\tvar i = accuracy;\n\t\n\twhile (i--) {\n\t\t\n\t\tvar nodesCount = woolNodes;\n\t\t\n\t\twhile (nodesCount--) {\n\t\t\n\t\t\tvar v = this.verts[nodesCount];\n\t\t\t\n\t\t\tif (v.isRootNode) {\n\t\t\t    v.x = posX;\n\t\t\t    v.y = posY;\n\t\t\t    v.z = posZ;\n\t\t\t}\n\t\t\n\t\t\telse {\n\t\t\n\t\t\t\tvar constraintsCount = v.constraints.length;\n\t\t  \t\t\n\t\t  \t\twhile (constraintsCount--) {\n\t\t  \t\t\t\n\t\t  \t\t\tvar c = v.constraints[constraintsCount];\n\n\t\t  \t\t\tvar diff_x = c.p1.x - c.p2.x,\n\t\t\t\t\t    diff_y = c.p1.y - c.p2.y,\n\t\t\t\t\t    dist = Math.sqrt(diff_x * diff_x + diff_y * diff_y),\n\t\t\t\t\t    diff = (c.length - dist) / dist;\n\n\t\t\t\t  \tvar px = diff_x * diff * .5;\n\t\t\t\t  \tvar py = diff_y * diff * .5;\n\n\t\t\t\t  \tc.p1.x += px;\n\t\t\t\t  \tc.p1.y += py;\n\t\t\t\t  \tc.p2.x -= px;\n\t\t\t\t  \tc.p2.y -= py;\n\t\t\t\t  \tc.p1.z = c.p2.z = posZ;\n\t\t  \t\t}\n\n\t\t  \t\tif (nodesCount == woolNodes-1){\n\t\t  \t\t\tthis.body.position.x = this.verts[nodesCount].x;\n\t\t\t\t\tthis.body.position.y = this.verts[nodesCount].y;\n\t\t\t\t\tthis.body.position.z = this.verts[nodesCount].z;\n\n\t\t\t\t\tthis.body.rotation.z += (v.y <= this.ballRay)? (v.oldx-v.x)/10 : Math.min(Math.max( diff_x/2, -.1 ), .1);\n\t\t  \t\t}\n\t\t  \t}\n\t\t  \t\n\t\t  \tif (v.y < this.ballRay) {\n\t\t  \t\tv.y = this.ballRay;\n\t\t  \t}\n\t\t}\n\t}\n\n\tnodesCount = woolNodes;\n\twhile (nodesCount--) this.verts[nodesCount].update();\n\n\tthis.string.geometry.verticesNeedUpdate = true;\n\n\t\n}\n\nBall.prototype.receivePower = function(tp){\n\tthis.verts[woolNodes-1].add_force(tp.x, tp.y);\n}\n\n// Enf of the code inspired by dissmulate\n\n\n// Make everything work together :\n\nvar t=0;\n\nfunction loop(){\n  render();\n  \n  t+=.05;\n  hero.updateTail(t);\n\n  var ballPos = getBallPos();\n  ball.update(ballPos.x,ballPos.y, ballPos.z);\n  ball.receivePower(hero.transferPower);\n  hero.interactWithBall(ball.body.position);\n\n  requestAnimationFrame(loop);\n}\n\n\nfunction getBallPos(){\n  var vector = new THREE.Vector3();\n\n  vector.set(\n      ( mousePos.x / window.innerWidth ) * 2 - 1, \n      - ( mousePos.y / window.innerHeight ) * 2 + 1,\n      0.1 );\n\n  vector.unproject( camera );\n  var dir = vector.sub( camera.position ).normalize();\n  var distance = (ballWallDepth - camera.position.z) / dir.z;\n  var pos = camera.position.clone().add( dir.multiplyScalar( distance ) );\n  return pos;\n}\n\nfunction render(){\n  if (controls) controls.update();\n  renderer.render(scene, camera);\n}\n\nwindow.addEventListener('load', init, false);\n\nfunction init(event){\n  initScreenAnd3D();\n  createLights();\n  createFloor()\n  createHero();\n  createBall();\n  loop();\n}"]}